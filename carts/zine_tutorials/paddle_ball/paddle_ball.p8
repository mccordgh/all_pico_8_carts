pico-8 cartridge // http://www.pico-8.com
version 15
__lua__
function _init()
	pad_x = 52
	pad_y = 122
	pad_w = 24
	pad_h = 4
	
	ball_x = 64
	ball_y = 64
	ball_size = 3
	ball_xdir = 3
	ball_ydir = -4
	
	score = 0
	
	lives = 3
	
	game_over = false
	music(0, 0, 8)
end

function move_paddle()
 if not game_over then
 	if btn(0) and pad_x > 1 then
 	 pad_x -= 3
 	elseif btn(1) and pad_x + pad_w < 126 then
 	 pad_x += 3
 	end
 end
end

function move_ball()
 ball_x += ball_xdir
 ball_y += ball_ydir
end

function bounce_ball()
 --left
 if ball_x < ball_size then
  ball_xdir = -ball_xdir
  sfx(0, 2)
 end
 
 --right
 if ball_x > 128 - ball_size then
  ball_xdir = -ball_xdir
  sfx(0, 2)
 end
 
 --top
 if ball_y < ball_size then
  ball_ydir = -ball_ydir
  sfx(0, 2)
 end
end

function bounce_paddle()
 if ball_x >= pad_x and
  ball_x <= pad_x + pad_w and
  ball_y >= pad_y then
  sfx(1, 2)
  score += 10
  ball_ydir = -ball_ydir
 end
end

function lose_dead_ball()
 if ball_y > 128 then
  if lives > 0 then
   sfx(6, 2)
   lives = lives - 1
  
   for i = 1, 30 do
  	 flip()
   end
  
   ball_y = 24
 	else
 		ball_ydir = 0
 		ball_xdir = 0
 		ball_x = 64
 		ball_y = 64
 		sfx(7, 2)
   game_over = true
 	end
 end
end

function _update()
 move_paddle()
 
 bounce_ball()
 bounce_paddle()
 
 move_ball()
 
 lose_dead_ball()
end

function _draw()
 cls()
  
 if game_over then
   print("✽game over✽", 40, 50, 11)
 end
  
 --lives
 for i = 1, lives do
  spr(1, 90 + i * 8, 4)
 end
 
 --score
 print("score: " .. score, 12, 6, 11)
 
	--ball
	circfill(ball_x, ball_y, ball_size, 7)

 --paddle
 rectfill(pad_x, pad_y, pad_x + pad_w, pad_y + pad_h, 8)

	--border
	rect(0, 0, 127, 127, 11)
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000008088000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700088887800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000088878800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000008888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
0102000004050070500a05012050170501c0501f05023050270502a0502e0502f00032000180000e6000e60013000100000f6000b0000f60005000010000f6000f6000f600000000f600000000f6000f60000000
00020000000002b05029050220501f0501a05015050120500e0500805004050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
011000201555600000000000000000000135500000000000000001055000000000000000013550105500000000000155500000000000000001355000000000000000010550000000000000000135501055000000
000800000c753000001f124000000c655000001f12400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000156200000000000000001562000000000000000015620000000000000000156200000000000000001562000000000000000015620000000000000000156200000000000000001562000000
001000003961000000000000000000000000000000000000000000000000000000000000000000000000000039610000000000000000000000000000000000000000000000000000000000000000000000000000
0002000032450304502e4502d4502845025450234501f4501d4501a4501845014450114500d45031400304002e4002d400294002840024400214001c40018400154000f4000c4000840004400014000840007400
00080000000002f75004600297500460023750056001a750046001175004600087500170001700017000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
011000080c753000001f124000000c655000001f12400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
012000201f3121f312000001c3121f3121f3120000000000000001c3121f312213121f3121f3121c312000031f3121f312000001c3121f3121f3120000000000000002431223312213121f3121d3121c3121a012
012000201a5121a51200000245121a5121a5120000000000000001c5121a512185121a5121a5121f512000001a5121a51200000245121a5121a5120000000000000001c5121a5121851223512215121f3121d312
011000080c544000040c544000000c544000000c54400100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
011000081154400004115440000011544000001154400100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
012000201f3121f312000001c3121f3121f3120000000000000001c3121f312213121f3121f3121c312000031f3121f312000001c3121f3121f3120000000000000002431223312213121f3121f3122131300000
012000201a5121a51200000245121a5121a5120000000000000001c5121a512185121a5121a5121f512000001a5121a51200000245121a5121a5120000000000000001c5121a5121851223512215122151300000
011000081354400004135440000013544000001354400100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__music__
00 080b4445
01 080b0d0e
00 080c090a
00 080b0d0e
02 080c090a

